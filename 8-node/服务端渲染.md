最大限度的重用代码（同构），减少开发维护成本，那就需要采用 react 或者 vue 等前端框架相结合 node (ssr) 来实现

## SSR的优势
1. 更利于SEO。
2. 更利于首屏渲染

## SSR的局限
1. 服务端压力较大
2. 开发条件受限
  - 只会执行到componentDidMount之前的生命周期钩子
3. 学习成本相对较高


## 核心原理
整体来说 react 服务端渲染原理不复杂，其中最核心的内容就是同构

所谓同构就是采用一套代码，构建双端（server 和 client）逻辑，最大限度的重用代码，不用维护两套代码

1. node server 接收客户端请求，得到当前的req url path,

2. 然后在已有的路由表内查找到对应的组件，拿到需要请求的数据，将数据作为 props
、context或者store 形式传入组件，

3. 然后基于 react 内置的服务端渲染api renderToString() or renderToNodeStream() 把组件渲染为 html字符串或者 stream 流, 

4. 再把最终的 html 进行输出前需要将数据注入到浏览器端(注水)，server 输出(response)后浏览器端可以得到数据(脱水)，

5. 浏览器开始进行渲染和节点对比，然后执行组件的componentDidMount 完成组件内事件绑定和一些交互，浏览器重用了服务端输出的 html 节点，整个流程结束。


### 路由同构
双端使用同一套路由规则，node server 通过req url path 进行组件的查找，得到需要渲染的组件。


### 数据同构（预取同构）

数据预取同构，解决双端如何使用同一套数据请求方法来进行数据请求。

给组件定义静态方法来处理，组件内定义异步数据请求的方法也合情合理，同时声明为静态（static），在 server 端和组件内都也可以直接通过组件（function） 来进行访问。


