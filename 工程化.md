# webpack

## 什么是前端工程化
1. 协作上
  - 开发规范、语法检查工具
  - 版本管理、提交规范

2. 项目架构上
  - 模块化、组件化
  - 脚手架统一

3. 构建
  - 资源压缩、混淆
  - 图片处理

4. 持续集成、部署
  - jenkins CI
  - 静态资源分离， cdn

5. 质量跟踪
  - 单元测试
  - 监控

6. 用户体验
  

## 多入口配置


## 抽离压缩 css 文件

```js
{
  plugins: [
    new MiniCssExtractPlugin({
      filename: '',
    })
  ],
  optimization: {
    // 压缩 css
    minimizer: [
      new TerserJSPlugin({})， new OptimizeCSSAssetsPlugin({})
    ]
  }
}

```

## 抽离公共代码

```js

optimization: {
    // 分割代码块
    splitChunks: {
      cacheGroups: {
        vendor: {

        },

        common: {

        }
      },

    }
  }

```

## 懒加载

## loader 与 plugin

## externals
防止将外部引用的包打包到 bundle 中

## 热更新原理

使用express启动本地服务，当浏览器访问资源时对此做响应。
服务端和客户端使用websocket实现长连接
webpack监听源文件的变化，即当开发者保存文件时触发webpack的重新编译。

每次编译都会生成hash值、已改动模块的json文件、已改动模块代码的js文件
编译完成后通过socket向客户端推送当前编译的hash戳
客户端的websocket监听到有文件改动推送过来的hash戳，会和上一次对比

一致则走缓存
不一致则通过ajax和jsonp向服务端获取最新资源
使用内存文件系统去替换有修改的内容实现局部刷新