# 安全类

[前端安全](https://mubu.com/doc/Pb9lLOsHB)

## CSRF
Cross-site request forgery  跨站请求伪造

### 攻击原理
1. 网站中某接口存在漏洞
2. 用户在该网站登陆过

### 如何防御
1. Token 验证
2. Referer 验证 （页面来源）
3. 隐藏令牌 

## XSS
cross-site scripting 跨域脚本攻击
攻击者在网站上注入恶意的客户端代码，通过恶意脚本对客户端网页进行篡改，从而在用户浏览网页时，对用户浏览器进行控制或者获取用户隐私数据的一种攻击方式(将一些隐私数据像 cookie、session 发送给攻击者，将受害者重定向到一个由攻击者控制的网站，在受害者的机器上进行一些恶意操作)

[参考视频](http://www.imooc.com/learn/812)

### 分类
反射型（非持久型）、存储型（持久型）、基于DOM

反射型： 反射型 XSS 只是简单地把用户输入的数据 “反射” 给浏览器
  - 攻击者诱使用户点击一个恶意链接,或者提交一个表单，或者进入一个恶意网站时，注入脚本进入被攻击者的网站

存储型: 存储型会把用户输入的数据 "存储" 在服务器端，当浏览器请求数据时，脚本从服务器上传回并执行。这种 XSS 攻击具有很强的稳定性

  - 比较常见的一个场景是攻击者在社区或论坛上写下一篇包含恶意 JavaScript 代码的文章或评论，文章或评论发表后，所有访问该文章或评论的用户，都会在他们的浏览器中执行这段恶意的 JavaScript 代码

基于DOM: 通过恶意脚本修改页面的 DOM 结构，是纯粹发生在客户端的攻击


### 原理及防御措施

1. HttpOnly 防止劫取 Cookie
2. 输入检查(不要相信用户的任何输入)
3. 输出检查

## 接口防刷
1. referer 校验 UA
2. c/s 约定签名算法， s 校验
3. s 对请求ip单位时间内请求数量做限制
4. 前置交互式验证。先验证再请求